#:import Factory kivy.factory.Factory

<SDRootWidget>:
  canvas:
    Color:
      rgba: .3, 0, 0, 1
    Rectangle:
      pos: self.pos
      size: self.size
  size_hint: 1, 1
  orientation: 'vertical'
  padding: 10
  size_hint: 1, 1
  UserSelect:
    config: root.model
    size_hint: 1, None
    height: '100dp'
  Widget:
    size_hint_y: None
    height: 40
  Apps:
    app_manager: root.app_manager
    apps: root.model.apps
    size_hint_y: None
  Label:
    text: root.model.config_path

<UserSelect>:
  config: None
  BoxLayout:
    id: layout
    padding: 10
    canvas:
      Color:
        rgba: .3, .3, .4, 1
      Rectangle:
        pos: self.pos
        size: self.size
    orientation: 'vertical'
    size_hint_y: None
    Label:
      text: 'Select Steam Users for which to install Apps'

<Apps>:
  app_manager: None
  apps: []
  BoxLayout:
    orientation: 'vertical'
    Label:
      text: 'Web Apps'
      size_hint_y: None
    Button:
      size_hint_y: None
      text: 'Add'
      height: 44
      on_release: root.show_new_app_dialog()

<NewAppDialog>:
  field_label_width: 200
  app_name: 'My App'
  app_url: 'https://youtube.com'
  app_show_address_bar: False
  title: 'New App'
  size_hint: 0.95, 0.95
  auto_dismiss: False
  BoxLayout:
    orientation: 'vertical'
    Widget:
      size_hint_y: None
      height: 10
    TextField:
      label: 'name'
      placeholder: root.app_name
      label_width: root.field_label_width
      value_change: root.set_name
    TextField:
      label: 'url'
      placeholder: root.app_url
      label_width: root.field_label_width
      value_change: root.set_url
    CheckBoxField:
      label: 'show address bar'
      default: root.app_show_address_bar
      label_width: root.field_label_width
      value_change: root.set_show_address_bar
    Widget:
      height: 40
    Button:
      size_hint_y: None
      text: 'Create'
      on_release: root.dismiss()
    Widget:

<TextField@BoxLayout>:
  label: 'label'
  placeholder: ''
  label_width: 100
  value_change: None
  size_hint_y: None
  height: 35
  orientation: 'horizontal'
  BoxLayout:
    size_hint_x: None
    width: root.label_width
    orientation: 'horizontal'
    Label:
      width: root.label_width
      size_hint_x: None
      size: self.texture_size
      text: root.label
      padding_x: 5
      halign: 'left'
    Widget:
      size_hint_x: 1
  TextInput:
    text: root.placeholder
    on_text: root.value_change is not None and root.value_change(self.text)

<CheckBoxField@BoxLayout>
  label: 'label'
  default: False
  label_width: 100
  value_change: None
  size_hint_y: None
  height: 35
  orientation: 'horizontal'
  BoxLayout:
    size_hint_x: None
    width: root.label_width
    orientation: 'horizontal'
    Label:
      size_hint_x: None
      size: self.texture_size
      text: root.label
      padding_x: 5
      halign: 'left'
    Widget:
      size_hint_x: 1
  CheckBox:
    value: root.default
    size_hint_x: None
    on_release: root.value_change is not None and root.value_change(self.value)
  Widget:
    size_hint_x: 1
